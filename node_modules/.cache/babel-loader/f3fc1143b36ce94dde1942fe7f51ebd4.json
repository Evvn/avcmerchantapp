{"ast":null,"code":"import _objectSpread from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/michaelfoster/Git/mryum-avc/src/components/Menu/MenuContainer.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport HorizontalScrollNav from '../Common/HorizontalScrollNav';\nimport Filter from './Filter.js';\nimport LanguageSelect from './LanguageSelect.js';\nimport Menu from './Menu'; // import { persistStore } from 'redux-persist'\n\nimport Footer from './Footer';\nimport Water from './Water';\nimport MenuSearch from '../Common/MenuSearch';\nimport LoadingScreen from '../LoadingScreen/LoadingScreen';\nimport * as actions from './actions/actions.js';\nimport * as cartActions from '../Cart/actions/actions.js';\nimport classNames from 'classnames';\nimport ReactGA from 'react-ga';\nimport { venues } from '../Common/enums/commonEnums.js';\nimport CategorySelect from '../CategorySelect/CategorySelect.js';\n\nvar MenuContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MenuContainer, _React$Component);\n\n  function MenuContainer(props) {\n    var _this;\n\n    _classCallCheck(this, MenuContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuContainer).call(this, props));\n    var paramArray = window.location.href.split('/');\n    _this.params = {\n      requestedVenue: paramArray[3],\n      item: paramArray.length === 5 ? paramArray[4] === 'qr' || paramArray[4] === 'test' || paramArray[4] === 'menu' ? false : paramArray[4] : false\n    };\n    _this.routeToItemDetail = _this.routeToItemDetail.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MenuContainer, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$props = this.props,\n          getMenuData = _this$props.getMenuData,\n          bffRes = _this$props.bffRes,\n          venue = _this$props.venue,\n          itemId = _this$props.itemId,\n          setItemId = _this$props.setItemId,\n          clearSectionPositions = _this$props.clearSectionPositions,\n          venueUrl = _this$props.venueUrl;\n\n      if (!bffRes) {\n        document.title = \"Mr Yum\";\n        getMenuData(venueUrl);\n        clearSectionPositions();\n      } else {\n        //const venueName = Object.values(bffRes)[0].fields.Venue;\n        document.title = venueUrl + \" Menu\";\n      }\n\n      if (this.params.item !== itemId) {\n        setItemId(this.params.item);\n      }\n    }\n  }, {\n    key: \"componentWillUpdate\",\n    value: function componentWillUpdate() {\n      var _this$props2 = this.props,\n          getMenuData = _this$props2.getMenuData,\n          bffRes = _this$props2.bffRes,\n          venue = _this$props2.venue,\n          itemId = _this$props2.itemId,\n          setItemId = _this$props2.setItemId,\n          clearSectionPositions = _this$props2.clearSectionPositions;\n      /*if (!bffRes || this.params.requestedVenue !== venue) {\n        getMenuData(this.params.requestedVenue, this.params.item);\n        clearSectionPositions();\n      }*/\n\n      if (this.params.item !== itemId) {\n        setItemId(this.params.item);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var clearSectionPositions = this.props.clearSectionPositions;\n      clearSectionPositions();\n      window.scrollTo(0, 0); //persistStore(this.props).purge();\n    }\n  }, {\n    key: \"routeToItemDetail\",\n    value: function routeToItemDetail(e, id, lang) {\n      //const { setItemId } = this.props;\n      var newId = id ? id : false;\n      var refSuffix = newId ? \"/\".concat(id) : '';\n      window.location = window.location.href + \"\".concat(refSuffix);\n    }\n  }, {\n    key: \"openCart\",\n    value: function openCart() {\n      window.location = \"/wv/cart\";\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          sectionPositions = _this$props3.sectionPositions,\n          filter = _this$props3.filter,\n          updateFilter = _this$props3.updateFilter,\n          updateLang = _this$props3.updateLang,\n          lang = _this$props3.lang,\n          bffRes = _this$props3.bffRes,\n          itemId = _this$props3.itemId,\n          venueUrl = _this$props3.venueUrl,\n          category = _this$props3.category,\n          setCategory = _this$props3.setCategory;\n      var venueName = bffRes ? Object.values(bffRes.menuByItem)[0].fields.Venue : false;\n      var itemView = itemId ? true : false;\n      var filtersInUse = Object.values(filter).includes(true); // replace venues.wv when we have a real bff res\n      // {venues[venueUrl]}\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: classNames('header', itemView ? 'previewHeader' : ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, itemView ? React.createElement(\"img\", {\n        onClick: function onClick() {\n          window.history.back();\n        },\n        src: \"/icons/arrow-left-solid-white.svg\",\n        className: \"headerBackArrow\",\n        alt: \"back arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }) : null, category && !!venueUrl && !itemView ? React.createElement(\"img\", {\n        onClick: function onClick() {\n          setCategory(false);\n        },\n        src: \"/icons/arrow-left-solid-white.svg\",\n        className: \"headerBackArrow\",\n        alt: \"back arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }) : null, !category && !itemView ? React.createElement(\"h1\", {\n        className: \"venue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, venues.wintervillage) : null, !itemView && React.createElement(Filter, {\n        filter: filter,\n        updateFilter: updateFilter,\n        lang: lang,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), category && !itemView && !filtersInUse ? React.createElement(HorizontalScrollNav, {\n        sectionPositions: sectionPositions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }) : '', !itemView && React.createElement(LanguageSelect, {\n        lang: lang,\n        updateLang: updateLang,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        onClick: function onClick(e) {\n          _this2.openCart();\n        },\n        className: \"cartIcon\",\n        src: \"/icons/cart_icon.svg\",\n        alt: \"cart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          filter = _this$props4.filter,\n          lang = _this$props4.lang,\n          bffRes = _this$props4.bffRes,\n          isLoading = _this$props4.isLoading,\n          setSectionPosition = _this$props4.setSectionPosition,\n          itemId = _this$props4.itemId,\n          category = _this$props4.category,\n          setCategory = _this$props4.setCategory,\n          addToCart = _this$props4.addToCart;\n      return isLoading || !bffRes ? React.createElement(LoadingScreen, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"Menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, this.getHeader(), category ? React.createElement(\"div\", {\n        className: \"menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Menu, {\n        menuItemKeys: Object.keys(bffRes.menuByCategory[category]),\n        menuItems: bffRes.menuByCategory[category],\n        filter: filter,\n        lang: lang,\n        itemId: itemId,\n        routeToItemDetail: this.routeToItemDetail,\n        setSectionPosition: setSectionPosition,\n        addToCart: addToCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      })) : React.createElement(CategorySelect, {\n        categories: Object.keys(bffRes.menuByCategory),\n        setCategory: setCategory,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return MenuContainer;\n}(React.Component);\n\n;\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators(_objectSpread({}, actions, cartActions), dispatch);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    bffRes: state.persistentMenu.bffRes,\n    category: state.persistentMenu.category,\n    isLoading: state.common.isLoading,\n    venue: state.persistentMenu.venue,\n    sectionPositions: state.menu.sectionPositions,\n    filter: state.persistentMenu.filter,\n    lang: state.persistentMenu.lang,\n    setCategory: state.persistentMenu.setCategory\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuContainer);","map":{"version":3,"sources":["/Users/michaelfoster/Git/mryum-avc/src/components/Menu/MenuContainer.js"],"names":["React","connect","bindActionCreators","HorizontalScrollNav","Filter","LanguageSelect","Menu","Footer","Water","MenuSearch","LoadingScreen","actions","cartActions","classNames","ReactGA","venues","CategorySelect","MenuContainer","props","paramArray","window","location","href","split","params","requestedVenue","item","length","routeToItemDetail","bind","getMenuData","bffRes","venue","itemId","setItemId","clearSectionPositions","venueUrl","document","title","scrollTo","e","id","lang","newId","refSuffix","sectionPositions","filter","updateFilter","updateLang","category","setCategory","venueName","Object","values","menuByItem","fields","Venue","itemView","filtersInUse","includes","history","back","wintervillage","openCart","isLoading","setSectionPosition","addToCart","getHeader","keys","menuByCategory","Component","mapDispatchToProps","dispatch","mapStateToProps","state","persistentMenu","common","menu"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {connect} from 'react-redux'\nimport {bindActionCreators} from 'redux'\nimport HorizontalScrollNav from '../Common/HorizontalScrollNav';\nimport Filter from './Filter.js';\nimport LanguageSelect from './LanguageSelect.js';\nimport Menu from './Menu';\n// import { persistStore } from 'redux-persist'\nimport Footer from './Footer';\nimport Water from './Water';\nimport MenuSearch from '../Common/MenuSearch';\nimport LoadingScreen from '../LoadingScreen/LoadingScreen';\nimport * as actions from './actions/actions.js';\nimport * as cartActions from '../Cart/actions/actions.js';\nimport classNames from 'classnames'\nimport ReactGA from 'react-ga'\nimport { venues } from '../Common/enums/commonEnums.js';\n\nimport CategorySelect from '../CategorySelect/CategorySelect.js';\n\nclass MenuContainer extends React.Component {\n  constructor(props) {\n    super(props)\n\n    const paramArray = window.location.href.split('/');\n    this.params = {\n       requestedVenue: paramArray[3],\n       item: paramArray.length === 5 ? paramArray[4] === 'qr' || paramArray[4] === 'test' || paramArray[4] === 'menu' ? false : paramArray[4] : false,\n    }\n\n    this.routeToItemDetail = this.routeToItemDetail.bind(this)\n  }\n\n componentWillMount() {\n   const { getMenuData, bffRes, venue, itemId, setItemId, clearSectionPositions, venueUrl } = this.props;\n   if (!bffRes) {\n    document.title = \"Mr Yum\";\n     getMenuData(venueUrl);\n     clearSectionPositions();\n   }\n   else{\n    //const venueName = Object.values(bffRes)[0].fields.Venue;\n    document.title = venueUrl + \" Menu\";\n   }\n   if(this.params.item !== itemId){\n     setItemId(this.params.item)\n   }\n }\n\n componentWillUpdate() {\n   const { getMenuData, bffRes, venue, itemId, setItemId, clearSectionPositions } = this.props;\n   /*if (!bffRes || this.params.requestedVenue !== venue) {\n     getMenuData(this.params.requestedVenue, this.params.item);\n     clearSectionPositions();\n   }*/\n\n   if(this.params.item !== itemId){\n     setItemId(this.params.item)\n   }\n }\n\n componentWillUnmount() {\n   const { clearSectionPositions } = this.props;\n   clearSectionPositions();\n   window.scrollTo(0,0)\n   //persistStore(this.props).purge();\n }\n\n routeToItemDetail(e, id, lang) {\n   //const { setItemId } = this.props;\n   const newId = id ? id : false;\n   const refSuffix = newId ? `/${id}` : '';\n   window.location = window.location.href + `${refSuffix}`\n }\n\n openCart(){\n  window.location = `/wv/cart`;\n }\n\n\n  getHeader(){\n    const {\n      sectionPositions,\n      filter,\n      updateFilter,\n      updateLang,\n      lang,\n      bffRes,\n      itemId,\n      venueUrl,\n      category,\n      setCategory,\n    } = this.props;\n    const venueName = bffRes ? Object.values(bffRes.menuByItem)[0].fields.Venue : false;\n    const itemView = itemId ? true : false;\n    const filtersInUse = Object.values(filter).includes(true)\n\n    // replace venues.wv when we have a real bff res\n    // {venues[venueUrl]}\n\n    return (\n      <div>\n        <header className={ classNames('header', itemView ? 'previewHeader' : '') }>\n          {/* back arrow for routing, control this and venuename via props */}\n          { itemView ? <img onClick={() => {window.history.back()}} src=\"/icons/arrow-left-solid-white.svg\" className=\"headerBackArrow\" alt=\"back arrow\"/> : null }\n          { category && !!venueUrl && !itemView? <img onClick={() => {setCategory(false)}} src=\"/icons/arrow-left-solid-white.svg\" className=\"headerBackArrow\" alt=\"back arrow\"/> : null }\n          { !category && !itemView? <h1 className=\"venue\">{venues.wintervillage}</h1> : null }\n          { !itemView && <Filter filter={filter} updateFilter={updateFilter} lang={lang} /> }\n          { category && !itemView && !filtersInUse ? <HorizontalScrollNav sectionPositions={sectionPositions}/> : ''}\n          { !itemView && <LanguageSelect lang={lang} updateLang={updateLang} /> }\n          {/* { !itemView && <MenuSearch data={bffRes} hide={false} onInput={(result) => console.log(result)}/>} */}\n          <img onClick={(e)=>{this.openCart()}} className=\"cartIcon\" src=\"/icons/cart_icon.svg\" alt=\"cart\"/>\n\n          {/* TODO: check if cart has items, display badge if so */}\n          {/* { somethingHere && <div className=\"cartBadge\"/> } */}\n        </header>\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      filter,\n      lang,\n      bffRes,\n      isLoading,\n      setSectionPosition,\n      itemId,\n      category,\n      setCategory,\n      addToCart,\n    } = this.props;\n\n    return (\n      isLoading || !bffRes ? <LoadingScreen/> :\n      (\n        <div className=\"Menu\">\n          {this.getHeader()}\n          {category ? (\n            <div className=\"menu\">\n              <Menu\n                menuItemKeys={Object.keys(bffRes.menuByCategory[category])}\n                menuItems={bffRes.menuByCategory[category]}\n                filter={filter}\n                lang={lang}\n                itemId={itemId}\n                routeToItemDetail={this.routeToItemDetail}\n                setSectionPosition={setSectionPosition}\n                addToCart={addToCart}\n              />\n              <Footer/>\n            </div>\n          ) : (\n            <CategorySelect\n              categories={Object.keys(bffRes.menuByCategory)}\n              setCategory={setCategory}\n            />\n          )}\n        </div>\n      )\n    );\n  }\n\n};\n\nconst mapDispatchToProps = dispatch => bindActionCreators({...actions, ...cartActions}, dispatch)\n\nconst mapStateToProps = state => ({\n  bffRes: state.persistentMenu.bffRes,\n  category: state.persistentMenu.category,\n  isLoading: state.common.isLoading,\n  venue: state.persistentMenu.venue,\n  sectionPositions: state.menu.sectionPositions,\n  filter: state.persistentMenu.filter,\n  lang: state.persistentMenu.lang,\n  setCategory: state.persistentMenu.setCategory,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuContainer)\n"]},"metadata":{},"sourceType":"module"}