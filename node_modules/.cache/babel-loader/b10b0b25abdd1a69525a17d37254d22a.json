{"ast":null,"code":"import _classCallCheck from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/michaelfoster/Git/mryum-avc/src/components/Menu/ItemDetail.js\";\nimport React from 'react';\nimport JsxParser from 'react-jsx-parser';\nimport Swipe from \"react-easy-swipe\";\nimport { toast } from \"react-toastify\";\nimport AddOn from './AddOn'; //css\n\nimport './styles/itemDetail.scss';\n\nvar ItemDetail =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ItemDetail, _React$Component);\n\n  function ItemDetail(props) {\n    var _this;\n\n    _classCallCheck(this, ItemDetail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ItemDetail).call(this, props));\n    _this.state = {\n      swipeRight: false,\n      stagedQuantity: 1,\n      selectedAddOns: false\n    };\n    _this.onSwipeRight = _this.onSwipeRight.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSwipeMove = _this.onSwipeMove.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSwipeEnd = _this.onSwipeEnd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ItemDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // iterate over each defined word\n      document.querySelectorAll(\".define\").forEach(function (element) {\n        // add click event listener to each defined word\n        element.addEventListener(\"click\", function (e) {\n          if (document.querySelector(\".prevDefinedWord\") === null) {\n            return;\n          } // on click, show definition in modal - uses data attribute to store definition in word\n\n\n          document.querySelector(\".prevDefinedWord\").textContent = e.target.textContent;\n          document.querySelector(\".prevDefinitionText\").textContent = e.target.getAttribute(\"data\");\n          document.querySelector(\".prevDefinition\").classList.remove(\"hidden\");\n          document.querySelector(\".prevDefinition\").classList.add(\"open\");\n          document.querySelector(\".prevDefinition\").classList.remove(\"fadeOut\");\n        });\n      });\n    } // defines swipe right event if swipe is greater than 75px long to prevent accidental swipes when scrolling\n\n  }, {\n    key: \"onSwipeMove\",\n    value: function onSwipeMove(position, event) {\n      var swipeRight = false;\n\n      if (position.x > 115) {\n        swipeRight = true;\n      }\n\n      if (swipeRight) {\n        this.setState({\n          swipeRight: swipeRight\n        });\n      }\n    } // when swipe event is finished - fires onSwipeRight function to close preview\n\n  }, {\n    key: \"onSwipeEnd\",\n    value: function onSwipeEnd(position, event) {\n      if (this.state.swipeRight) {\n        this.onSwipeRight();\n      }\n    } // calls swipe right event if swipe is greater than 175px long to prevent accidental swipes when scrolling\n\n  }, {\n    key: \"onSwipeRight\",\n    value: function onSwipeRight() {\n      window.history.back();\n    }\n  }, {\n    key: \"handleAddToCart\",\n    value: function handleAddToCart(details, stagedQuantity) {\n      var addToCart = this.props.addToCart;\n      var selectedAddOns = this.state.selectedAddOns;\n      addToCart(details, stagedQuantity, selectedAddOns);\n      toast.success(\"Added \".concat(stagedQuantity, \" \").concat(details.name));\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      if (e.target.className === 'previewModal') {\n        window.history.back();\n      }\n\n      if (e.target.className === \"define\") {\n        return;\n      }\n\n      document.querySelector(\".prevDefinition\").classList.add(\"fadeOut\");\n      setTimeout(function () {\n        document.querySelector(\".prevDefinedWord\").textContent = \"\";\n        document.querySelector(\".prevDefinitionText\").textContent = \"\";\n        document.querySelector(\".prevDefinition\").classList.add(\"hidden\");\n      }, 300);\n    }\n  }, {\n    key: \"incrementQuantity\",\n    value: function incrementQuantity() {\n      var stagedQuantity = this.state.stagedQuantity;\n      this.setState({\n        stagedQuantity: stagedQuantity + 1\n      });\n    }\n  }, {\n    key: \"decrementQuantity\",\n    value: function decrementQuantity() {\n      var stagedQuantity = this.state.stagedQuantity;\n\n      if (stagedQuantity > 1) {\n        this.setState({\n          stagedQuantity: stagedQuantity - 1\n        });\n      }\n    }\n  }, {\n    key: \"selectAddOn\",\n    value: function selectAddOn(addOnState) {\n      this.setState({\n        selectedAddOns: addOnState\n      });\n    }\n  }, {\n    key: \"getAddons\",\n    value: function getAddons() {\n      var _this2 = this;\n\n      var details = this.props.details;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Add-Ons\"), details.addons.map(function (addOn) {\n        return React.createElement(AddOn, {\n          details: addOn.AIRTABLE_MENU_PAYLOAD.fields,\n          onSelect: _this2.selectAddOn,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        });\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          details = _this$props.details,\n          lang = _this$props.lang,\n          addToCart = _this$props.addToCart;\n      var addons = details.addons;\n      var stagedQuantity = this.state.stagedQuantity;\n      var name = details.name;\n      var desc = details.description;\n      var translatedName = 'name-' + lang;\n      var translatedDesc = 'description-' + lang;\n      var creditUrl;\n      var img = details.image ? details.image[0].url : '/mryum_assets/missing_photo.jpg';\n\n      if (lang !== 'en') {\n        name = details[translatedName];\n        desc = details[translatedDesc];\n      }\n\n      if (details['image credit']) {\n        creditUrl = 'https://www.instagram.com/' + details['image credit'].substr(1) + '/';\n      }\n\n      var backgroundImage;\n\n      if (details.tags !== 'LIST' && !!details.image) {\n        backgroundImage = {\n          backgroundImage: 'url(' + img + ')',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat'\n        };\n      }\n\n      return React.createElement(Swipe, {\n        onSwipeMove: this.onSwipeMove,\n        onSwipeEnd: this.onSwipeEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"previewModal\",\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"previewItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, !!details.tags && details.tags[0] === 'LIST' ? null : React.createElement(\"div\", {\n        className: \"previewImage\",\n        style: backgroundImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"previewWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"prevDefinition hidden\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"prevDefinedWord\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"prevDefinitionText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"prevDefinition hidden\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"prevDefinedWord\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"prevDefinitionText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      })), \" \", !!details['image credit'] && !!details.Tags && details.Tags[0] !== 'LIST' ? React.createElement(\"div\", {\n        className: \"imageCredit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"imageCreditLabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"photo by\", React.createElement(\"a\", {\n        className: \"imageCreditLink\",\n        href: creditUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, details['image credit']))) : null, React.createElement(\"div\", {\n        className: \"previewName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, name), React.createElement(\"div\", {\n        className: \"previewDescription\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(JsxParser, {\n        jsx: \"\".concat(desc),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      })), details.addons ? this.getAddons() : null, React.createElement(\"div\", {\n        className: \"previewDetails\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"previewPrice\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, details['price']), !!details.tags && details.tags[0] === 'LIST' ? null : React.createElement(\"div\", {\n        className: \"previewTags\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, !!details.tags ? details.tags.join(', ') : null)), React.createElement(\"div\", {\n        className: \"quantityCont\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"quantityBtn\",\n        onClick: function onClick(e) {\n          _this3.decrementQuantity();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"-\"), React.createElement(\"span\", {\n        className: \"quantity\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, stagedQuantity), React.createElement(\"button\", {\n        className: \"quantityBtn\",\n        onClick: function onClick(e) {\n          _this3.incrementQuantity();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"+\")), React.createElement(\"button\", {\n        className: \"addToOrderBtn\",\n        onClick: function onClick(e) {\n          _this3.handleAddToCart(details, stagedQuantity);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"Add \", stagedQuantity, \" to Order\")))));\n    }\n  }]);\n\n  return ItemDetail;\n}(React.Component);\n\nexport default ItemDetail;","map":{"version":3,"sources":["/Users/michaelfoster/Git/mryum-avc/src/components/Menu/ItemDetail.js"],"names":["React","JsxParser","Swipe","toast","AddOn","ItemDetail","props","state","swipeRight","stagedQuantity","selectedAddOns","onSwipeRight","bind","onSwipeMove","onSwipeEnd","document","querySelectorAll","forEach","element","addEventListener","e","querySelector","textContent","target","getAttribute","classList","remove","add","position","event","x","setState","window","history","back","details","addToCart","success","name","className","setTimeout","addOnState","addons","map","addOn","AIRTABLE_MENU_PAYLOAD","fields","selectAddOn","lang","desc","description","translatedName","translatedDesc","creditUrl","img","image","url","substr","backgroundImage","tags","backgroundSize","backgroundPosition","backgroundRepeat","handleClick","Tags","getAddons","join","decrementQuantity","incrementQuantity","handleAddToCart","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport JsxParser from 'react-jsx-parser'\nimport Swipe from \"react-easy-swipe\";\nimport { toast } from \"react-toastify\";\n\nimport AddOn from './AddOn';\n//css\nimport './styles/itemDetail.scss'\n\nclass ItemDetail extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      swipeRight: false,\n      stagedQuantity: 1,\n      selectedAddOns: false,\n    }\n\n    this.onSwipeRight = this.onSwipeRight.bind(this);\n    this.onSwipeMove = this.onSwipeMove.bind(this);\n    this.onSwipeEnd = this.onSwipeEnd.bind(this);\n  }\n\n  componentDidMount() {\n    // iterate over each defined word\n    document.querySelectorAll(\".define\").forEach(element => {\n      // add click event listener to each defined word\n      element.addEventListener(\"click\", e => {\n        if (document.querySelector(\".prevDefinedWord\") === null) {\n          return;\n        }\n        // on click, show definition in modal - uses data attribute to store definition in word\n        document.querySelector(\".prevDefinedWord\").textContent = e.target.textContent;\n        document.querySelector(\".prevDefinitionText\").textContent = e.target.getAttribute(\"data\");\n        document.querySelector(\".prevDefinition\").classList.remove(\"hidden\");\n        document.querySelector(\".prevDefinition\").classList.add(\"open\");\n        document.querySelector(\".prevDefinition\").classList.remove(\"fadeOut\");\n      });\n    });\n  }\n\n  // defines swipe right event if swipe is greater than 75px long to prevent accidental swipes when scrolling\n  onSwipeMove(position, event) {\n    let swipeRight = false;\n    if (position.x > 115) {\n      swipeRight = true;\n    }\n    if (swipeRight) {\n      this.setState({swipeRight: swipeRight});\n    }\n  }\n\n  // when swipe event is finished - fires onSwipeRight function to close preview\n  onSwipeEnd(position, event) {\n    if (this.state.swipeRight) {\n      this.onSwipeRight();\n    }\n  }\n\n  // calls swipe right event if swipe is greater than 175px long to prevent accidental swipes when scrolling\n  onSwipeRight() {\n    window.history.back()\n  }\n\n  handleAddToCart(details, stagedQuantity) {\n    const {addToCart} = this.props;\n    const { selectedAddOns } = this.state;\n    addToCart(details, stagedQuantity, selectedAddOns);\n    toast.success(`Added ${stagedQuantity} ${details.name}`);\n  }\n\n  handleClick(e) {\n    if (e.target.className === 'previewModal') {\n      window.history.back()\n    }\n    if (e.target.className === \"define\") {\n      return\n    }\n    document.querySelector(\".prevDefinition\").classList.add(\"fadeOut\");\n    setTimeout(function() {\n      document.querySelector(\".prevDefinedWord\").textContent = \"\";\n      document.querySelector(\".prevDefinitionText\").textContent = \"\";\n      document.querySelector(\".prevDefinition\").classList.add(\"hidden\");\n    }, 300);\n  }\n\n  incrementQuantity() {\n    const {stagedQuantity} = this.state;\n    this.setState({\n      stagedQuantity: stagedQuantity + 1\n    });\n  }\n\n  decrementQuantity() {\n    const {stagedQuantity} = this.state;\n    if (stagedQuantity > 1) {\n      this.setState({\n        stagedQuantity: stagedQuantity - 1\n      });\n    }\n  }\n\n  selectAddOn(addOnState){\n    this.setState({selectedAddOns: addOnState});\n  }\n\n  getAddons(){\n    const { details } = this.props;\n    \n    return (\n      <div>\n      <p>Add-Ons</p>\n        {details.addons.map(addOn => (\n          <AddOn details={addOn.AIRTABLE_MENU_PAYLOAD.fields} onSelect={this.selectAddOn}/>))}\n      </div>\n    );\n  }\n\n  render() {\n    const {details, lang, addToCart} = this.props;\n    const addons = details.addons;\n    const {stagedQuantity} = this.state;\n    let name = details.name\n    let desc = details.description;\n    let translatedName = 'name-' + lang\n    let translatedDesc = 'description-' + lang\n    let creditUrl\n    let img = details.image\n      ? details.image[0].url\n      : '/mryum_assets/missing_photo.jpg'\n\n    if (lang !== 'en') {\n      name = details[translatedName]\n      desc = details[translatedDesc]\n    }\n\n    if (details['image credit']) {\n      creditUrl = 'https://www.instagram.com/' + details['image credit'].substr(1) + '/'\n    }\n\n    let backgroundImage\n    if (details.tags !== 'LIST' && !!details.image) {\n      backgroundImage = {\n        backgroundImage: 'url(' + img + ')',\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat'\n      }\n    }\n\n    return (<Swipe onSwipeMove={this.onSwipeMove} onSwipeEnd={this.onSwipeEnd}>\n      <div className='previewModal' onClick={this.handleClick}>\n\n        <div className=\"previewItem\">\n\n          {\n            !!details.tags && details.tags[0] === 'LIST'\n              ? null\n              : <div className=\"previewImage\" style={backgroundImage}></div>\n          }\n\n          <div className=\"previewWrapper\">\n\n            {/* hidden definition modal */}\n            <div className=\"prevDefinition hidden\">\n              <div className=\"prevDefinedWord\"/>\n              <div className=\"prevDefinitionText\"/>\n            </div>\n\n            <div className=\"prevDefinition hidden\">\n              <div className=\"prevDefinedWord\"></div>\n              <div className=\"prevDefinitionText\"></div>\n            </div>\n\n            {/* No image credit? Don't show this section */\n            } {\n              !!details['image credit'] && !!details.Tags && details.Tags[0] !== 'LIST'\n                ? <div className=\"imageCredit\">\n                    <div className=\"imageCreditLabel\">photo by\n                      <a className=\"imageCreditLink\" href={creditUrl}>{details['image credit']}</a>\n                    </div>\n                  </div>\n                : null\n            }<div className=\"previewName\">{name}</div>\n\n            <div className=\"previewDescription\">\n              <JsxParser jsx={`${desc}`\n}/>\n            </div>\n\n  \n            {details.addons ? this.getAddons() : null}\n\n            <div className=\"previewDetails\">\n              <div className=\"previewPrice\">{details['price']}</div>\n\n              {/* Tags are LIST? Don't show */}\n            {\n              !!details.tags && details.tags[0] === 'LIST'\n                ? null\n                : <div className=\"previewTags\">{\n                      !!details.tags\n                        ? details.tags.join(', ')\n                        : null\n                    }</div>\n            }\n          </div>\n\n          <div className=\"quantityCont\">\n            <button\n              className=\"quantityBtn\"\n              onClick={(e) => {this.decrementQuantity()}}\n            >\n              -\n            </button>\n\n            <span className=\"quantity\">{stagedQuantity}</span>\n\n            <button\n              className=\"quantityBtn\"\n              onClick={(e) => {this.incrementQuantity()}}\n            >\n              +\n            </button>\n          </div>\n          <button\n            className=\"addToOrderBtn\"\n            onClick={(e) => {\n              this.handleAddToCart(details, stagedQuantity)\n            }}\n          >\n            Add {stagedQuantity} to Order\n          </button>\n        </div>\n      </div>\n\n    </div>\n\n  </Swipe>)\n  }\n}\n\nexport default ItemDetail\n"]},"metadata":{},"sourceType":"module"}